@model WebsiteThuCungBento.ViewModels.ListDVViewModel

@{
    ViewBag.Title = "Spa Thú Cưng";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<!-- Hero Section -->
<div class="position-relative overflow-hidden" style="height: 400px; background: linear-gradient(135deg, #2c786c 0%, #219ebc 100%);">
    <div class="container h-100">
        <div class="row h-100 align-items-center">
            <div class="col-lg-6 text-white">
                <h1 class="display-4 fw-bold mb-3">Spa & Grooming</h1>
                <p class="fs-5 mb-4">Dịch vụ chăm sóc sắc đẹp chuyên nghiệp cho thú cưng với đội ngũ groomer giàu kinh nghiệm</p>
                <div class="d-flex gap-3 flex-wrap">
                    <div class="d-flex align-items-center">
                        <i class="fa-solid fa-scissors fs-3 me-2 text-warning"></i>
                        <span>Cắt tỉa</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fa-solid fa-shower fs-3 me-2 text-warning"></i>
                        <span>Tắm gội</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fa-solid fa-spa fs-3 me-2 text-warning"></i>
                        <span>Spa thư giãn</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <img src="~/images/tam-meo.jpg" alt="Spa" class="img-fluid rounded-3 shadow-lg" style="max-height: 350px; object-fit: cover; width: 100%;">
            </div>
        </div>
    </div>
</div>

<!-- Booking Form -->
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card border-0 shadow-lg">
                <div class="card-body p-5">
                    <h2 class="text-center mb-4 fw-bold text-primary">Đặt Dịch Vụ Ngay</h2>
                    
                    <form action="/User/DangKyDichVu" method="post">
                        <input type="hidden" name="serviceid" id="serviceid" />
                        
                        <!-- Service Tabs -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Chọn loại dịch vụ:</label>
                            <div class="btn-group w-100" role="group">
                                @foreach (var listspa in Model.listDV)
                                {
                                    <input type="radio" class="btn-check" name="serviceType" id="service_@listspa.MaDV" autocomplete="off" @(Model.listDV.First() == listspa ? "checked" : "")>
                                    <label class="btn btn-outline-primary" for="service_@listspa.MaDV" data-service="@listspa.TenDV">@listspa.TenDV</label>
                                }
                            </div>
                        </div>

                        <!-- Service Details -->
                        @foreach (var listspa in Model.listDV)
                        {
                            string[] listcombo = listspa.ComboDV.Split(',');
                            <div class="service-detail @(Model.listDV.First() == listspa ? "active" : "")" data-service="@listspa.TenDV">
                                <div class="alert alert-info">
                                    <h6 class="fw-bold mb-2">Dịch vụ bao gồm:</h6>
                                    <ul class="mb-0">
                                        @foreach (var combo in listcombo)
                                        {
                                            <li>@combo</li>
                                        }
                                    </ul>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label fw-bold">Chọn cân nặng của bé:</label>
                                    <div class="row g-3">
                                        @foreach (var listctspa in Model.listCTDV)
                                        {
                                            if (listctspa.MaDV == listspa.MaDV)
                                            {
                                                <div class="col-md-6">
                                                    <div class="weight-option p-3 border rounded-3 cursor-pointer" 
                                                         data-serviceid="@listctspa.MaCT" 
                                                         data-price="@String.Format("{0:0,0}", listctspa.DonGia)">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div>
                                                                <h6 class="mb-0">@listctspa.DieuKien</h6>
                                                            </div>
                                                            <div class="text-end">
                                                                <div class="fw-bold text-warning fs-5">@String.Format("{0:0,0}", listctspa.DonGia)đ</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                        }

                        <div class="text-center pt-3 border-top">
                            <div class="mb-3">
                                <span class="text-muted">Tổng tiền:</span>
                                <span id="totalPrice" class="fs-3 fw-bold text-warning ms-2">0đ</span>
                            </div>
                            <button type="submit" class="btn btn-primary btn-lg px-5">
                                <i class="fa-solid fa-calendar-check me-2"></i> Đặt dịch vụ ngay
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Price Tables -->
<div class="container my-5">
    <h2 class="text-center mb-5 fw-bold">Bảng Giá Dịch Vụ</h2>
    
    <div class="row g-4">
        <!-- Gói Tắm Cơ Bản -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-primary text-white py-3">
                    <h5 class="mb-0"><i class="fa-solid fa-shower me-2"></i> Gói Tắm Cơ Bản</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <tbody>
                                <tr><td>Dưới 2kg</td><td class="text-end fw-bold">99,000đ</td></tr>
                                <tr><td>2kg - 4kg</td><td class="text-end fw-bold">130,000đ</td></tr>
                                <tr><td>4kg - 9kg</td><td class="text-end fw-bold">180,000đ</td></tr>
                                <tr><td>9kg - 15kg</td><td class="text-end fw-bold">230,000đ</td></tr>
                                <tr><td>15kg - 20kg</td><td class="text-end fw-bold">280,000đ</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <ul class="list-unstyled small mt-3">
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Tắm sạch bằng dầu gội hữu cơ</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Sục Ozone làm sạch sâu</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Dưỡng lông mềm mượt</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Làm sạch tai, cắt móng</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Gói Spa Toàn Diện -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100 border-warning" style="border-width: 2px !important;">
                <div class="card-header bg-warning text-white py-3">
                    <h5 class="mb-0"><i class="fa-solid fa-spa me-2"></i> Gói Spa Toàn Diện</h5>
                    <small class="badge bg-white text-warning">Phổ biến nhất</small>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <tbody>
                                <tr><td>Dưới 4kg</td><td class="text-end fw-bold">190,000đ</td></tr>
                                <tr><td>4kg - 9kg</td><td class="text-end fw-bold">260,000đ</td></tr>
                                <tr><td>9kg - 15kg</td><td class="text-end fw-bold">320,000đ</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <ul class="list-unstyled small mt-3">
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Massage thư giãn</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Dưỡng da, khử mùi</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Cắt và mài móng</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Tỉa gọn lông mặt</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Gói Spa + Cắt Tạo Kiểu -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-success text-white py-3">
                    <h5 class="mb-0"><i class="fa-solid fa-cut me-2"></i> Spa + Cắt Tạo Kiểu</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <tbody>
                                <tr><td>Dưới 4kg</td><td class="text-end fw-bold">350,000đ</td></tr>
                                <tr><td>4kg - 9kg</td><td class="text-end fw-bold">420,000đ</td></tr>
                                <tr><td>9kg - 15kg</td><td class="text-end fw-bold">550,000đ</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <ul class="list-unstyled small mt-3">
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Dưỡng da, sục Ozone</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Cắt, tỉa tạo kiểu</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Vệ sinh toàn thân</li>
                        <li class="mb-2"><i class="fa-solid fa-check text-success me-2"></i> Sấy lông tạo phồng</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Additional Services -->
<div class="bg-light py-5 my-5">
    <div class="container">
        <h3 class="text-center mb-4 fw-bold">Dịch Vụ Bổ Sung</h3>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card border-0 shadow-sm text-center h-100">
                    <div class="card-body">
                        <i class="fa-solid fa-brush fs-1 text-primary mb-3"></i>
                        <h6 class="fw-bold">Gỡ rối lông</h6>
                        <p class="text-muted mb-0">50,000đ - 200,000đ</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-0 shadow-sm text-center h-100">
                    <div class="card-body">
                        <i class="fa-solid fa-ear-listen fs-1 text-warning mb-3"></i>
                        <h6 class="fw-bold">Vệ sinh tai</h6>
                        <p class="text-muted mb-0">50,000đ</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-0 shadow-sm text-center h-100">
                    <div class="card-body">
                        <i class="fa-solid fa-hand-scissors fs-1 text-success mb-3"></i>
                        <h6 class="fw-bold">Cắt móng</h6>
                        <p class="text-muted mb-0">50,000đ</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-0 shadow-sm text-center h-100">
                    <div class="card-body">
                        <i class="fa-solid fa-house fs-1 text-danger mb-3"></i>
                        <h6 class="fw-bold">Dịch vụ tại nhà</h6>
                        <p class="text-muted mb-0">+12% phí</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .weight-option, .room-option {
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .weight-option:hover, .room-option:hover {
        border-color: var(--accent-color) !important;
        background-color: #fff7ed;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(245, 158, 11, 0.2);
    }
    
    .weight-option.selected, .room-option.selected {
        border-color: var(--accent-color) !important;
        background-color: #fff7ed;
        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
    }

    .service-detail {
        display: none;
    }

    .service-detail.active {
        display: block;
    }
</style>

<script>
    $(document).ready(function() {
        // Service type switching
        $('input[name="serviceType"]').change(function() {
            var serviceName = $(this).next('label').data('service');
            $('.service-detail').removeClass('active');
            $('.service-detail[data-service="' + serviceName + '"]').addClass('active');
            $('#serviceid').val('');
            $('#totalPrice').text('0đ');
            $('.weight-option').removeClass('selected');
        });

        // Weight selection
        $(document).on('click', '.weight-option', function() {
            $('.weight-option').removeClass('selected');
            $(this).addClass('selected');
            
            var serviceId = $(this).data('serviceid');
            var price = $(this).data('price');
            
            $('#serviceid').val(serviceId);
            $('#totalPrice').text(price + 'đ');
        });

        // Form validation
        $('form').submit(function(e) {
            if (!$('#serviceid').val()) {
                e.preventDefault();
                alert('Vui lòng chọn cân nặng của bé!');
            }
        });
    });
</script>
