@{
    ViewData["Title"] = "Test Services API";
}

<div class="container mt-5">
    <h1>Test Services API</h1>
    <button onclick="testAPI()" class="btn btn-primary">Test Load Services</button>
    <div id="result" class="mt-3"></div>
    <div id="servicesList" class="row mt-3"></div>
</div>

@section Scripts {
<script>
    function testAPI() {
        console.log('Testing API...');
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = 'Loading...';
        
        fetch('/Booking/GetServices')
            .then(response => {
                console.log('Response status:', response.status);
                return response.json();
            })
            .then(services => {
                console.log('Services loaded:', services);
                resultDiv.innerHTML = `<div class="alert alert-success">Loaded ${services.length} services</div>`;
                resultDiv.innerHTML += `<pre>${JSON.stringify(services, null, 2)}</pre>`;
                
                const servicesList = document.getElementById('servicesList');
                servicesList.innerHTML = '';
                services.forEach(service => {
                    const col = document.createElement('div');
                    col.className = 'col-md-4 mb-3';
                    col.innerHTML = `
                        <div class="card">
                            <img src="${service.imageUrl}" class="card-img-top" alt="${service.serviceName}" style="height: 200px; object-fit: cover;">
                            <div class="card-body">
                                <h5>${service.serviceName}</h5>
                                <p>${service.description}</p>
                                <p class="text-primary fw-bold">${service.price.toLocaleString('vi-VN')} VNƒê</p>
                                <a href="/Booking/Book?serviceId=${service.serviceId}" class="btn btn-primary">Book</a>
                            </div>
                        </div>
                    `;
                    servicesList.appendChild(col);
                });
            })
            .catch(error => {
                console.error('Error:', error);
                resultDiv.innerHTML = `<div class="alert alert-danger">Error: ${error.message}</div>`;
            });
    }
    
    // Auto test on page load
    window.addEventListener('load', testAPI);
</script>
}
