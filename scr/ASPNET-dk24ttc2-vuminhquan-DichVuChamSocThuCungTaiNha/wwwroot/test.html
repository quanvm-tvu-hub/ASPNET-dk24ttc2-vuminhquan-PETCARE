<!DOCTYPE html>
<html>
<head>
    <title>Simple Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Test Services Loading</h1>
        
        <div class="alert alert-info">
            <strong>Step 1:</strong> Click button to load services
        </div>
        
        <button onclick="loadServices()" class="btn btn-primary btn-lg">Load Services</button>
        
        <div id="status" class="mt-3"></div>
        <div id="services" class="row mt-4"></div>
    </div>

    <script>
        function loadServices() {
            const statusDiv = document.getElementById('status');
            const servicesDiv = document.getElementById('services');
            
            statusDiv.innerHTML = '<div class="alert alert-warning">Loading...</div>';
            console.log('Fetching from: /Booking/GetServices');
            
            fetch('/Booking/GetServices')
                .then(response => {
                    console.log('Response received:', response);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Data received:', data);
                    
                    if (data.error) {
                        statusDiv.innerHTML = `<div class="alert alert-danger">Error: ${data.error}</div>`;
                        return;
                    }
                    
                    statusDiv.innerHTML = `<div class="alert alert-success">Successfully loaded ${data.length} services!</div>`;
                    statusDiv.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                    
                    servicesDiv.innerHTML = '';
                    data.forEach(service => {
                        const col = document.createElement('div');
                        col.className = 'col-md-4 mb-3';
                        col.innerHTML = `
                            <div class="card">
                                <img src="${service.imageUrl}" class="card-img-top" style="height: 200px; object-fit: cover;">
                                <div class="card-body">
                                    <h5>${service.serviceName}</h5>
                                    <p>${service.description}</p>
                                    <p class="text-primary"><strong>${service.price.toLocaleString('vi-VN')} VNƒê</strong></p>
                                    <a href="/Booking/Book?serviceId=${service.serviceId}" class="btn btn-primary">Book Now</a>
                                </div>
                            </div>
                        `;
                        servicesDiv.appendChild(col);
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                    statusDiv.innerHTML = `<div class="alert alert-danger">Error: ${error.message}<br>Check console for details</div>`;
                });
        }
        
        // Auto load on page load
        window.addEventListener('load', () => {
            console.log('Page loaded, auto-loading services...');
            loadServices();
        });
    </script>
</body>
</html>
